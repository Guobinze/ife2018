<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>index4</title>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000;opacity:1"></div>
	<button id="fade-btn">淡出</button>

	<ul>
		<li><a href="https://zjinxing.github.io/ife2018/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E9%99%A2/js%E9%83%A8%E5%88%86/day20%20and%2021/index1.html">编码一地址</a></li>
		<li><a href="https://zjinxing.github.io/ife2018/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E9%99%A2/js%E9%83%A8%E5%88%86/day20%20and%2021/index2.html">编码二地址</a></li>
		<li><a href="https://zjinxing.github.io/ife2018/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E9%99%A2/js%E9%83%A8%E5%88%86/day20%20and%2021/index3.html">编码三地址</a></li>
		<li><a href="https://zjinxing.github.io/ife2018/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E9%99%A2/js%E9%83%A8%E5%88%86/day20%20and%2021/index4.html">编码四地址</a></li>
		<li><a href="https://zjinxing.github.io/ife2018/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E9%99%A2/js%E9%83%A8%E5%88%86/day20%20and%2021/index5.html">编码五地址</a></li>
	</ul>

	<script type="text/javascript">
		/*****************利用setInterval实现*****************************
		let fadeObj = document.querySelector('#fade-obj');
		let btn = document.querySelector('#fade-btn');
		let steps = 50;
        let currentStep = 1;

		function fadeOut() {
			let timer = setInterval(() => {
				if(currentStep > steps) {
					clearInterval(timer);
					currentStep = 1;
					btn.innerHTML = '淡入';
					btn.removeAttribute('disabled');
				}
				else {
					fadeObj.style.opacity = 1 - 1 / steps * currentStep++;
					btn.setAttribute('disabled', true);
				}
			},50)
		}

		function fadeIn() {
			let timer = setInterval(() => {
				if(currentStep > steps) {
					clearInterval(timer);
					currentStep = 1;
					btn.innerHTML = '淡出';
					btn.removeAttribute('disabled');
				}
				else {
					fadeObj.style.opacity = 1 / steps * currentStep++;
					btn.setAttribute('disabled', true);
				}
			},50)
		}

        btn.onclick = () => (fadeObj.style.opacity == 1)? fadeOut(): fadeIn();		

        **************************************************************************/


        /******以下利用setTimeout实现***********************************************/

        let fadeObj = document.querySelector('#fade-obj');
        let btn = document.querySelector('#fade-btn');

        function fadeOut() {
            let i = 1;  
        	function setFadeOut() {
        		if(i <= 0) {
        			clearTimeout(setFadeOut);
        			btn.innerHTML = '淡入';
        			btn.removeAttribute('disabled');
        			fadeObj.style.opacity = 0;
        		}else {
        			i -= 0.05;
        			fadeObj.style.opacity = i;
        			btn.setAttribute('disabled', true);
        			console.log(i)
        			setTimeout(setFadeOut, 100);
        		}
        	}
        	setFadeOut();       
        	
        }
        function fadeIn() {
        	let i = 0;  
        	function setFadeIn() {
        		if(i >= 1) {
        			clearTimeout(setFadeIn);
        			btn.innerHTML = '淡出';
        			btn.removeAttribute('disabled');
        			fadeObj.style.opacity = 1;
        		}else {
        			i += 0.05;
        			fadeObj.style.opacity = i;
        			btn.setAttribute('disabled', true);
        			console.log(i)
        			setTimeout(setFadeIn, 100);
        		}
        	}
        	setFadeIn();
        }


        btn.onclick = () => (fadeObj.style.opacity == 1)? fadeOut(): fadeIn();
        /****************************************************************************/

	</script>
</body>
</html>